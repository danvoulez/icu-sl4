# Example NetworkPolicy for ICU SL4 HTTP
# Apply with: kubectl apply -f k8s/networkpolicy.yaml

apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: icu-sl4-http-network-policy
  namespace: default
spec:
  podSelector:
    matchLabels:
      app: icu-sl4-http
  policyTypes:
    - Ingress
  ingress:
    # Allow from ingress controller
    - from:
      - namespaceSelector:
          matchLabels:
            name: ingress-nginx
      ports:
        - protocol: TCP
          port: 8787
    # Allow from same namespace
    - from:
      - namespaceSelector:
          matchLabels:
            name: default
      ports:
        - protocol: TCP
          port: 8787
    # Allow from monitoring namespace (for health checks)
    - from:
      - namespaceSelector:
          matchLabels:
            name: monitoring
      ports:
        - protocol: TCP
          port: 8787

